<!DOCTYPE html>
<html lang="en" class="theme-default">
    <head>
        <title>Drawing</title>

        <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
        <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests" />
        <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1.0" />
        <meta name="next-size-adjust" content="">
        <meta charset="UTF-8" />

        <link rel="shortcut icon" href="/assets/logo.png" />
        <link rel="apple-touch-icon" href="/assets/logo.png" />
        <link rel="image_src" href="/assets/logo.png" />
        <link rel="search" type="application/opensearchdescription+xml" title="Goldenapple3619's Website" href="/opensearch.xml" />
        <link rel="canonical" href="https://Goldenapple3619.github.io" />

        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://Goldenapple3619.github.io" />
        <meta property="og:site_name" content="Goldenapple3619's Website" />
        <meta property="og:title" content="Goldenapple3619's Website" />
        <meta property="og:image" itemprop="image primaryImageOfPage" content="/assets/logo.png" />
        <meta property="og:description" content="Goldenapple3619's Personal Website" />

        <meta name="description" content="Goldenapple3619's Personal Website" />
        <meta name="keywords" content="Goldenapple3619,personal website">

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:domain" content="Goldenapple3619.github.io" />
        <meta name="twitter:title" property="og:title" itemprop="name" content="Goldenapple3619's Website" />
        <meta name="twitter:description" property="og:description" itemprop="description" content="Goldenapple3619's personal Website" />

        <link href="/style/themes/theme-default.css" rel="stylesheet" />

        <link href="/style/common.css" rel="stylesheet" />
        <link href="/style/main.css" rel="stylesheet" />
        <link href="/style/gallery.css" rel="stylesheet" />

        <script src="/scripts/gallery.js" type="text/javascript"></script>
        <script src="/scripts/jsonDataLoader.js" type="text/javascript"></script>
    </head>
    <body>
        <div class="app" id="app">
            <div class="window-fill-x-auto window-fill-y-auto window" style="width: calc(100% - 300px); max-width: 700px;">
                <div class="window-header" style="display: flex; flex-direction: row; justify-content: space-between;">
                    <bold>Drawing</bold>
                    <button class="close-button" onclick="document.location.href='/';"></button>
                </div>
                <div class="window-body" style="height: 100vh; max-height: 500px; display: flex; flex-direction: column;">
                     <div class="digital container" style="display: flex; flex-direction: column; margin-left: 20px; margin-right: 20px; margin-top: 10px;">
                        <legend>Digital drawing</legend>
                    
                        <div class="gallery-controls">
                            <div class="gallery gallery-digital" style="height: 300px;">
                                <div class="gallery-item gallery-container display-state" style="border-radius: 0; display: flex; align-items: center;">
                                    <div class="progress-bar" style="width: 100%;">
                                        <div class="progress-bar-content" id="progressContent" style="width: 0%;"></div>
                                    </div>
                                </div>
                            </div>

                            <button class="gallery-btn prev">❮</button>
                            <button class="gallery-btn next">❯</button>
                        </div>

                    </div>

                    <!-- <div class="traditional container" style="display: flex; flex-direction: column; margin-left: 20px; margin-right: 20px; margin-top: 10px;">
                        <legend>Traditional drawing</legend>

                        <div class="gallery-controls">
                            <div class="gallery gallery-traditional" style="height: 300px;">
                                <div class="gallery-item gallery-container display-state" style="border-radius: 0; display: flex; align-items: center;">
                                    <div class="progress-bar" style="width: 100%;">
                                        <div class="progress-bar-content" id="progressContentTrad" style="width: 0%;"></div>
                                    </div>
                                </div>
                            </div>

                            <button class="gallery-btn prev">❮</button>
                            <button class="gallery-btn next">❯</button>
                        </div>
                    
                    </div> -->
                    <div class="instagram container" style="display: flex; flex-direction: column; margin-left: 20px; margin-right: 20px; margin-top: 10px;">
                        <legend>Links</legend>

                        <a class="link" href="https://www.instagram.com/goldenapple3619">Instagram</a>
                    </div>
                </div>
            </div>
        </div>

        <script type="text/javascript">
        (() => {
            function loadSelection(container, json) { 
                var progressContent = container.querySelector(".progress-bar-content");
                var state = container.querySelector(".display-state");
                var prev = container.parentNode.querySelector(".gallery-btn.prev");
                var next = container.parentNode.querySelector(".gallery-btn.next");

                let images = [];
                var imageLoaded = 0;
                var imageToLoad = 0;

                prev.style.display = "none";
                next.style.display = "none"; 

                window.document.JLI.fetch(json).then((list) => {
                    progressContent.style.width = `2%`;
                    imageToLoad = list.length;

                    list.forEach(element => {
                        let child = new Image();
                        
                        child.src = element.url;
                        child.classList.add("gallery-item");

                        images.push(child);
                    });

                    Array.from(images).filter(img => img.complete).map(() => {
                        ++imageLoaded;
                        progressContent.style.width = `${(imageLoaded / imageToLoad) * 100.0}%`;
                    });

                    Promise.all(Array.from(images).filter(img => !img.complete).map(img => new Promise(resolve => { img.onload = img.onerror = () => {++imageLoaded; progressContent.style.width = `${(imageLoaded / imageToLoad) * 100.0}%`; resolve();}; }))).then(() => {
                        progressContent.style.width = `100%`;
                        
                        container.innerHTML = '';

                        images.forEach(image => {
                            container.appendChild(image);
                        });

                        prev.style.display = "inline-block";
                        next.style.display = "inline-block"; 

                        window.document.reloadGallery();
                    });
                }).catch(err => {
                    state.innerText = err;
                });
            }

            loadSelection(document.body.querySelector(".gallery-digital"), "/assets/json/digital-drawings.json");
            // loadSelection(document.body.querySelector(".gallery-traditional"), "/assets/json/traditional-drawings.json");
        })();
        </script>
    </body>
</html>